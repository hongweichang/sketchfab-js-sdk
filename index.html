<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>Sketchfab JS SDK</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <script type="text/javascript" src="dist/sketchfab-sdk.2.0.0.js"></script>
    <style>
    .page {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        display: -webkit-flex;
    }
    .scrollable {
        box-sizing: border-box;
        overflow: auto;
        padding: 20px;
        flex: 1;
        -webkit-flex: 1;
    }
    code {
        display: block;
        margin-top: 1em;
    }
    </style>
</head>

<body>
<div class="container-fluid">
    <div class="page">
        <div class="scrollable">
        <h1>Skechfab JS SDK</h1>

        <p>Full API documentation: <a href="./dist/docs/">generated API doc</a></p>

        <h2>Models</h2>
        <ul>
            <li>
                <code>sketchfabSDK.Models.search(query, [offset])</code>
                <button onclick="Models_search()">sketchfabSDK.Models.search('diorama')</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.all([params])</code>
                <button onclick="Models_all()">sketchfabSDK.Models.all()</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.recent([offset])</code>
                <button onclick="Models_recent()">sketchfabSDK.Models.recent()</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.popular([offset])</code>
                <button onclick="Models_popular()">sketchfabSDK.Models.popular()</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.staffpicks([offset])</code>
                <button onclick="Models_staffpicks()">sketchfabSDK.Models.staffpicks()</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.byCategory(categoryId, [offset])</code>
                <button onclick="Models_byCategory()">sketchfabSDK.Models.byCategory('c92452986e70422ca2c6552835a89882')</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.byTag(tag, [offset])</code>
                <button onclick="Models_byTag()">sketchfabSDK.Models.byTag('substance')</button>
            </li>
            <li>
                <code>sketchfabSDK.Models.byUserId(id)</code>
                <button onclick="Models_byUserId()">sketchfabSDK.Models.byUserId(116)</button>
            </li>
        </ul>

        <h2>Model</h2>
        <ul>
            <li>
                <code>sketchfabSDK.Model.byId(id)</code>
                <button onclick="Model_byId()">sketchfabSDK.Model.byId('7w7pAfrCfjovwykkEeRFLGw5SXS')</button>
            </li>
            <li>
                <code>sketchfabSDK.Model.annotations(id)</code>
                <button onclick="Model_annotations()">sketchfabSDK.Model.annotations('387889bbe73648c38589a3fffd1f876c')</button>
            </li>
            <li>
                <code>sketchfabSDK.Model.textures(id)</code>
                <button onclick="Model_textures()">sketchfabSDK.Model.textures('387889bbe73648c38589a3fffd1f876c')</button>
            </li>
            <li>
                <code>sketchfabSDK.Model.comments(id)</code>
                <button onclick="Model_comments()">sketchfabSDK.Model.comments('387889bbe73648c38589a3fffd1f876c')</button>
            </li>
        </ul>

        <h2>Categories</h2>
        <ul>
            <li>
                <code>sketchfabSDK.Categories.all()</code>
                <button onclick="Categories_all()">sketchfabSDK.Categories.all()</button>
            </li>
        </ul>

        <h2>Users</h2>
        <ul>
            <li>
                <code>sketchfabSDK.Users.me(token)</code> See Authentication
            </li>
            <li>
                <code>sketchfabSDK.Users.all([params])</code>
                <button onclick="Users_all()">sketchfabSDK.Users.all()</button>
            </li>
            <li>
                <code>sketchfabSDK.Users.byId(id)</code>
                <button onclick="Users_byId()">sketchfabSDK.Users.byId(116)</button>
            </li>
            <li>
                <code>sketchfabSDK.Users.byUsername(username)</code>
                <button onclick="Users_byUsername()">sketchfabSDK.Users.byUsername('mestaty')</button>
            </li>
            <li>
                <code>sketchfabSDK.Users.byLocation(location, [offset])</code>
                <button onclick="Users_byLocation()">sketchfabSDK.Users.byLocation('Paris')</button>
            </li>
            <li>
                <code>sketchfabSDK.Users.bySkills(skills, [offset])</code>
                <button onclick="Users_bySkills()">sketchfabSDK.Users.bySkills('Blender')</button>
            </li>
        </ul>

        <h2>Feed</h2>
        <ul>
            <li>
                <code>sketchfabSDK.Feed.items(token, [params])</code>
                <button onclick="Feed_items()">sketchfabSDK.Feed.items(token)</button>
            </li>
        </ul>

        <h2>Authentication</h2>
        <div class="panel panel-default">
            <div class="panel-body">
                <button onclick="login()">login() + me()</button>
            </div>
        </div>
        <pre>
var sketchfabSDK = new SketchfabSDK({
    client_id: '6gLgJqAV_hVORbU8YAckMEy=RwitobgQs=TTSVwi',
    redirect_uri: 'http://svay.com/clients/sketchfab/sketchfab-js-sdk/authSuccess.html'
});

function login() {
    // Authenticate with OAuth2
    sketchfabSDK.connect()
        .then(function(grant){
            // Get user info
            return sketchfabSDK.Users.me(grant.access_token);
        })
        .then(function(response){
            // Log user info
            console.log(response);
        })
        .catch(function(error){
            console.log(error);
        });
}
        </pre>


        </div>
        <div class="scrollable">
            <div class="panel panel-default">
                <div class="panel-body">
                    <h2>Output</h2>
                    <pre><samp class="login-output"></samp></pre>
                </div>
            </div>
        </div>
    </div>
</div>


<script type="text/javascript">

function output(str) {
    document.querySelector('.login-output').innerText = str;
}

var sketchfabSDK = new SketchfabSDK({
    client_id: '6gLgJqAV_hVORbU8YAckMEy=RwitobgQs=TTSVwi',
    redirect_uri: 'http://svay.com/clients/sketchfab/sketchfab-js-sdk/authSuccess.html'
});

/**
 * Models
 */
var Models_fns = {
    'Models_search':['diorama'],
    'Models_all': [],
    'Models_recent': [],
    'Models_popular': [],
    'Models_staffpicks' : [],
    'Models_byCategory': ['c92452986e70422ca2c6552835a89882'],
    'Models_byTag': ['substance'],
    'Models_byUserId': [116]
}
for (name in Models_fns) {
    (function(name){
        window[name] = function() {
            var method = name.replace('Models_','');
            output('');
            sketchfabSDK.Models[method](Models_fns[name]).then(function(response){
                output(JSON.stringify(response, null, 4));
            });
        };
    })(name);
}

/**
 * Model
 */
var Model_fns = {
    'Model_byId' : ['7w7pAfrCfjovwykkEeRFLGw5SXS'],
    'Model_annotations' : ['387889bbe73648c38589a3fffd1f876c'],
    'Model_textures' : ['387889bbe73648c38589a3fffd1f876c'],
    'Model_comments' : ['387889bbe73648c38589a3fffd1f876c']
}
for (name in Model_fns) {
    (function(name){
        window[name] = function() {
            var method = name.replace('Model_','');
            output('');
            sketchfabSDK.Model[method](Model_fns[name]).then(function(response){
                output(JSON.stringify(response, null, 4));
            });
        };
    })(name);
}

/**
 * Categories
 */
function Categories_all() {
    document.querySelector('.login-output').innerHTML = '';
    sketchfabSDK.Categories.all().then(function(response){
        output(JSON.stringify(response, null, 4));
    });
}

/**
 * Users
 */
var Users_fns = {
    'Users_all': [],
    'Users_byId': [116],
    'Users_byUsername': ['mestaty'],
    'Users_byLocation' : ['Paris'],
    'Users_bySkills' : ['blender'],
}
for (name in Users_fns) {
    (function(name){
        window[name] = function() {
            var method = name.replace('Users_','');
            output('');
            sketchfabSDK.Users[method](Users_fns[name]).then(function(response){
                output(JSON.stringify(response, null, 4));
            });
        };
    })(name);
}

/**
 * Feed
 */
function Feed_items(token) {
    if (window.OAuth2Grant) {
        document.querySelector('.login-output').innerHTML = '';
        sketchfabSDK.Feed.all(window.OAuth2Grant.access_token).then(function(response){
            output(JSON.stringify(response, null, 4));
        });
    }
}

/**
 * Authentication
 */
function login() {
    // Authenticate with OAuth2
    sketchfabSDK.connect()
        .then(function(grant){
            // Get user info
            window.OAuth2Grant = grant;
            return sketchfabSDK.Users.me(grant.access_token);
        })
        .then(function(response){
            // Log user info
            console.log(response);
            output(JSON.stringify(response, null, 4));
        })
        .catch(function(error){
            console.log(error);
        });
}
</script>
</body>
</html>
